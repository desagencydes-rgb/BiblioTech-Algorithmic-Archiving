<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.layout.ColumnConstraints?>

<BorderPane xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.MembresController" style="-fx-padding: 20;">
    <center>
        <VBox spacing="20" style="-fx-padding: 0 20 0 0;">
            <VBox>
                <Label text="Inscrire un membre" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                <Label text="Informations du membre" style="-fx-text-fill: #7f8c8d;"/>
            </VBox>

            <VBox styleClass="card" spacing="20">
                <GridPane hgap="15" vgap="15">
                    <columnConstraints>
                        <ColumnConstraints minWidth="120" />
                        <ColumnConstraints hgrow="ALWAYS" />
                        <ColumnConstraints minWidth="120" />
                        <ColumnConstraints hgrow="ALWAYS" />
                    </columnConstraints>

                    <!-- Nom complet -->
                    <Label text="Nom complet :" GridPane.columnIndex="0" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="fullNameField" promptText="Saisir le nom complet" GridPane.columnIndex="1" GridPane.rowIndex="0" GridPane.columnSpan="3"/>

                    <!-- CIN / ID & Telephone -->
                    <Label text="CIN / ID :" GridPane.columnIndex="0" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="cinField" promptText="Saisir le numéro d'identification" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                    
                    <Label text="Téléphone :" GridPane.columnIndex="2" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="phoneField" promptText="Saisir le numéro de téléphone" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                    <!-- Email -->
                    <Label text="Email :" GridPane.columnIndex="0" GridPane.rowIndex="2" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="emailField" promptText="Saisir l'adresse email" GridPane.columnIndex="1" GridPane.rowIndex="2" GridPane.columnSpan="3"/>
                    
                    <!-- Adresse -->
                    <Label text="Adresse :" GridPane.columnIndex="0" GridPane.rowIndex="3" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="addressField" promptText="Saisir l'adresse complète" GridPane.columnIndex="1" GridPane.rowIndex="3" GridPane.columnSpan="3"/>

                    <!-- Type d'adhésion & Statut -->
                    <Label text="Type d'adhésion :" GridPane.columnIndex="0" GridPane.rowIndex="4" style="-fx-font-weight: bold;"/>
                    <HBox spacing="15" alignment="CENTER_LEFT" GridPane.columnIndex="1" GridPane.rowIndex="4" GridPane.columnSpan="1">
                        <RadioButton fx:id="radioStudent" text="Étudiant"/>
                        <RadioButton fx:id="radioTeacher" text="Enseignant"/>
                        <RadioButton fx:id="radioExternal" text="Externe"/>
                    </HBox>

                    <Label text="Statut :" GridPane.columnIndex="2" GridPane.rowIndex="4" style="-fx-font-weight: bold;"/>
                    <CheckBox fx:id="activeCheckBox" text="Membre actif" GridPane.columnIndex="3" GridPane.rowIndex="4"/>

                    <!-- ID Etudiant & Contact urgence -->
                     <!-- Note: Screenshot shows "ID Étudiant/Per..." and "Contact d'urgen..." -->
                    <Label text="ID Étudiant/Per..." GridPane.columnIndex="0" GridPane.rowIndex="5" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="studentIdField" promptText="Saisir l'ID si applicable" GridPane.columnIndex="1" GridPane.rowIndex="5"/>
                    
                    <Label text="Contact d'urgen..." GridPane.columnIndex="2" GridPane.rowIndex="5" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="emergencyContactField" promptText="Nom du contact" GridPane.columnIndex="3" GridPane.rowIndex="5"/>
                    
                    <!-- Tel Urgence (On next row, right side, based on visual guess or same row if wrapped? Screenshot shows Tél urgency below contact name usually or separate)
                         Screenshot:
                         [ ID Input ]   [ Contact Name Input ]
                                        Tél. d'urgence : [ Tel Input ]
                    -->
                    <Label text="Tél. d'urgence :" GridPane.columnIndex="2" GridPane.rowIndex="6" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="emergencyPhoneField" promptText="Téléphone du contact" GridPane.columnIndex="3" GridPane.rowIndex="6"/>
                    
                </GridPane>
                
                <HBox alignment="CENTER_RIGHT" spacing="10" style="-fx-padding: 10 0 0 0;">
                    <Button text="Réinitialiser" onAction="#handleReset" style="-fx-background-color: white; -fx-text-fill: #7f8c8d; -fx-border-color: #bdc3c7; -fx-border-radius: 4; -fx-background-radius: 4; -fx-cursor: hand; -fx-padding: 8 15;"/>
                    <Button text="Inscrire le membre" onAction="#handleSave" styleClass="button-green"/>
                </HBox>
            </VBox>

            <VBox spacing="10">
                <Label text="Liste des membres" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                <TableView fx:id="membersTable" VBox.vgrow="ALWAYS" styleClass="table-view">
                    <columns>
                        <TableColumn fx:id="idColumn" text="#" prefWidth="50"/>
                        <TableColumn fx:id="nameColumn" text="Nom complet" prefWidth="200"/>
                        <TableColumn fx:id="emailColumn" text="Email" prefWidth="250"/>
                    </columns>
                </TableView>
            </VBox>
        </VBox>
    </center>
    
    <right>
        <VBox spacing="20" style="-fx-padding: 0 0 0 20;">
            <Label text="Statistiques" styleClass="section-title" />
            <VBox styleClass="stat-card">
                 <Label text="Total de livres" style="-fx-text-fill: #95a5a6;"/>
                 <Label fx:id="totalBooksLabel" text="-" styleClass="stat-value"/>
                 <Label text="Dans la collection" styleClass="stat-sub"/>
            </VBox>
             <VBox styleClass="stat-card">
                 <Label text="Membres actifs" style="-fx-text-fill: #95a5a6;"/>
                 <Label fx:id="activeMembersLabel" text="-" styleClass="stat-value"/>
                 <Label text="Utilisateurs inscrits" styleClass="stat-sub"/>
            </VBox>
             <VBox styleClass="stat-card">
                 <Label text="Emprunts du jour" style="-fx-text-fill: #95a5a6;"/>
                 <Label fx:id="activeLoansLabel" text="-" styleClass="stat-value"/>
                 <Label text="Prêts actifs" styleClass="stat-sub"/>
            </VBox>
             <VBox styleClass="stat-card-green">
                 <Label text="Livres disponibles" style="-fx-text-fill: #95a5a6;"/>
                 <Label fx:id="availableBooksLabel" text="-" styleClass="stat-value-blue"/>
            </VBox>
        </VBox>
    </right>
</BorderPane>
